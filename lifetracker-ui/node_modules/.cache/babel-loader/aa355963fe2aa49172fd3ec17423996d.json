{"ast":null,"code":"const axios = require(\"axios\");\n\nclass APIClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl;\n    this.token = null;\n    this.tokenName = `rate_my_token_setup`;\n  }\n\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem(this.tokenName, token);\n  }\n\n  async request(_ref) {\n    let {\n      endpoint,\n      method = `GET`,\n      data = {}\n    } = _ref;\n    const url = `${this.remoteHostUrl}/${endpoint}`;\n    const header = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (this.token) {\n      header[\"Authorization\"] = `Bearer ${this.token}`;\n    }\n\n    try {\n      console.log(\"Enter here?\");\n      console.log(\"URL NO\", url);\n      console.log(\"Method no\", method);\n      const res = await axios({\n        url,\n        method,\n        data,\n        header\n      });\n      return {\n        data: res.data,\n        error: null\n      };\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n\n      const message = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message;\n      return {\n        data: null,\n        error: message || String(error)\n      };\n    }\n  }\n\n  async fetchUserFromToken() {\n    const result = await this.request({\n      endpoint: `author/me`,\n      method: `GET`\n    });\n    console.log(\"fetch user?\", result);\n    return result;\n  }\n\n  async loginUser(credentials) {\n    return await this.request({\n      endpoint: `author/login`,\n      method: `POST`,\n      data: credentials\n    });\n  }\n\n  async signUpUser(credentials) {\n    return await this.request({\n      endpoint: `author/register`,\n      method: `POST`,\n      data: credentials\n    });\n  }\n\n}\n\nmodule.exports = new APIClient(process.env.REACT_APP_REMOTE_HOST_URL || \"http://localhost:3001\");","map":{"version":3,"names":["axios","require","APIClient","constructor","remoteHostUrl","token","tokenName","setToken","localStorage","setItem","request","endpoint","method","data","url","header","console","log","res","error","message","response","String","fetchUserFromToken","result","loginUser","credentials","signUpUser","module","exports","process","env","REACT_APP_REMOTE_HOST_URL"],"sources":["/Users/abdul.karim/lifetrackerProject/lifetracker-ui/src/componentss/service/APIClient.js"],"sourcesContent":["const axios = require(\"axios\");\n\nclass APIClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl;\n    this.token = null;\n    this.tokenName = `rate_my_token_setup`\n  }\n\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem(this.tokenName, token)\n  }\n\n  async request({ endpoint, method = `GET`, data = {} }) {\n    const url = `${this.remoteHostUrl}/${endpoint}`;\n\n    const header = {\n      \"Content-Type\": \"application/json\",\n    };\n\n    if (this.token) {\n      header[\"Authorization\"] = `Bearer ${this.token}`\n    }\n    try {\n      console.log(\"Enter here?\")\n      console.log(\"URL NO\",url)\n      console.log(\"Method no\", method)\n      const res = await axios({ url, method, data, header });\n\n      \n      return {data : res.data, error: null}\n    } catch (error) {\n      const message = error?.response?.data?.error?.message\n\n\n      return {data : null, error : message || String(error)}\n    }\n  }\n\n\n  async fetchUserFromToken(){\n    const result =  await this.request({endpoint : `author/me`, method : `GET`})\n\n    console.log(\"fetch user?\", result)\n\n    return result\n  }\n\n\n  async loginUser(credentials){\n    return await this.request({endpoint : `author/login`, method : `POST`, data : credentials})\n  }\n\n  async signUpUser(credentials){\n    return await this.request({endpoint : `author/register`, method : `POST`, data : credentials})\n  }\n}\n\nmodule.exports = new APIClient(\n  process.env.REACT_APP_REMOTE_HOST_URL || \"http://localhost:3001\"\n);\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,MAAMC,SAAN,CAAgB;EACdC,WAAW,CAACC,aAAD,EAAgB;IACzB,KAAKA,aAAL,GAAqBA,aAArB;IACA,KAAKC,KAAL,GAAa,IAAb;IACA,KAAKC,SAAL,GAAkB,qBAAlB;EACD;;EAEDC,QAAQ,CAACF,KAAD,EAAQ;IACd,KAAKA,KAAL,GAAaA,KAAb;IACAG,YAAY,CAACC,OAAb,CAAqB,KAAKH,SAA1B,EAAqCD,KAArC;EACD;;EAEY,MAAPK,OAAO,OAA0C;IAAA,IAAzC;MAAEC,QAAF;MAAYC,MAAM,GAAI,KAAtB;MAA4BC,IAAI,GAAG;IAAnC,CAAyC;IACrD,MAAMC,GAAG,GAAI,GAAE,KAAKV,aAAc,IAAGO,QAAS,EAA9C;IAEA,MAAMI,MAAM,GAAG;MACb,gBAAgB;IADH,CAAf;;IAIA,IAAI,KAAKV,KAAT,EAAgB;MACdU,MAAM,CAAC,eAAD,CAAN,GAA2B,UAAS,KAAKV,KAAM,EAA/C;IACD;;IACD,IAAI;MACFW,OAAO,CAACC,GAAR,CAAY,aAAZ;MACAD,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBH,GAArB;MACAE,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBL,MAAzB;MACA,MAAMM,GAAG,GAAG,MAAMlB,KAAK,CAAC;QAAEc,GAAF;QAAOF,MAAP;QAAeC,IAAf;QAAqBE;MAArB,CAAD,CAAvB;MAGA,OAAO;QAACF,IAAI,EAAGK,GAAG,CAACL,IAAZ;QAAkBM,KAAK,EAAE;MAAzB,CAAP;IACD,CARD,CAQE,OAAOA,KAAP,EAAc;MAAA;;MACd,MAAMC,OAAO,GAAGD,KAAH,aAAGA,KAAH,0CAAGA,KAAK,CAAEE,QAAV,4EAAG,gBAAiBR,IAApB,kFAAG,qBAAuBM,KAA1B,0DAAG,sBAA8BC,OAA9C;MAGA,OAAO;QAACP,IAAI,EAAG,IAAR;QAAcM,KAAK,EAAGC,OAAO,IAAIE,MAAM,CAACH,KAAD;MAAvC,CAAP;IACD;EACF;;EAGuB,MAAlBI,kBAAkB,GAAE;IACxB,MAAMC,MAAM,GAAI,MAAM,KAAKd,OAAL,CAAa;MAACC,QAAQ,EAAI,WAAb;MAAyBC,MAAM,EAAI;IAAnC,CAAb,CAAtB;IAEAI,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BO,MAA3B;IAEA,OAAOA,MAAP;EACD;;EAGc,MAATC,SAAS,CAACC,WAAD,EAAa;IAC1B,OAAO,MAAM,KAAKhB,OAAL,CAAa;MAACC,QAAQ,EAAI,cAAb;MAA4BC,MAAM,EAAI,MAAtC;MAA6CC,IAAI,EAAGa;IAApD,CAAb,CAAb;EACD;;EAEe,MAAVC,UAAU,CAACD,WAAD,EAAa;IAC3B,OAAO,MAAM,KAAKhB,OAAL,CAAa;MAACC,QAAQ,EAAI,iBAAb;MAA+BC,MAAM,EAAI,MAAzC;MAAgDC,IAAI,EAAGa;IAAvD,CAAb,CAAb;EACD;;AAtDa;;AAyDhBE,MAAM,CAACC,OAAP,GAAiB,IAAI3B,SAAJ,CACf4B,OAAO,CAACC,GAAR,CAAYC,yBAAZ,IAAyC,uBAD1B,CAAjB"},"metadata":{},"sourceType":"module"}