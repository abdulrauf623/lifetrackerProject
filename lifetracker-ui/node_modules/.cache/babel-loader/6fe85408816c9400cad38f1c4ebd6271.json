{"ast":null,"code":"const axios = require(\"axios\");\n\nclass APIClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl;\n    this.token = null;\n    this.tokenName = `rate_my_token_setup`;\n  }\n\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem(this.tokenName, token);\n  }\n\n  async request(_ref) {\n    let {\n      endpoint,\n      method = `GET`,\n      data = {}\n    } = _ref;\n    const url = `${this.remoteHostUrl}/${endpoint}`;\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (this.token) {\n      headers[\"Authorization\"] = `Bearer ${this.token}`;\n    }\n\n    try {\n      const res = await axios({\n        url,\n        method,\n        data,\n        headers\n      });\n      return {\n        data: res.data,\n        error: null\n      };\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n\n      const message = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message;\n      return {\n        data: null,\n        error: message || String(error)\n      };\n    }\n  }\n\n  async fetchUserFromToken() {\n    const result = await this.request({\n      endpoint: `author/me`,\n      method: `GET`\n    });\n    console.log(\"fetch user?\", result);\n    return result;\n  }\n\n  async addExercise(credentials) {\n    return await this.request({\n      endpoint: `exercise`,\n      method: `POST`,\n      data: credentials\n    });\n  }\n\n  async getExercise() {\n    const results = await this.request({\n      endpoint: `exercise`,\n      method: `GET`\n    });\n    console.log(\"Results from get requrest\", results);\n  }\n\n  async loginUser(credentials) {\n    return await this.request({\n      endpoint: `author/login`,\n      method: `POST`,\n      data: credentials\n    });\n  }\n\n  async signUpUser(credentials) {\n    return await this.request({\n      endpoint: `author/register`,\n      method: `POST`,\n      data: credentials\n    });\n  }\n\n  async logOutUser() {\n    this.setToken(null);\n    localStorage.setItem(this.tokenName, \"\");\n  }\n\n}\n\nmodule.exports = new APIClient(process.env.REACT_APP_REMOTE_HOST_URL || \"http://localhost:3001\");","map":{"version":3,"names":["axios","require","APIClient","constructor","remoteHostUrl","token","tokenName","setToken","localStorage","setItem","request","endpoint","method","data","url","headers","res","error","message","response","String","fetchUserFromToken","result","console","log","addExercise","credentials","getExercise","results","loginUser","signUpUser","logOutUser","module","exports","process","env","REACT_APP_REMOTE_HOST_URL"],"sources":["/Users/abdul.karim/lifetrackerProject/lifetracker-ui/src/componentss/service/APIClient.js"],"sourcesContent":["const axios = require(\"axios\");\n\nclass APIClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl;\n    this.token = null;\n    this.tokenName = `rate_my_token_setup`\n  }\n\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem(this.tokenName, token)\n  }\n\n  async request({ endpoint, method = `GET`, data = {} }) {\n    const url = `${this.remoteHostUrl}/${endpoint}`;\n\n    const headers = {\n      \"Content-Type\": \"application/json\",\n    };\n\n    if (this.token) {\n      headers[\"Authorization\"] = `Bearer ${this.token}`\n    }\n    try {\n      const res = await axios({ url, method, data, headers });\n\n      \n      return {data : res.data, error: null}\n    } catch (error) {\n      const message = error?.response?.data?.error?.message\n\n\n      return {data : null, error : message || String(error)}\n    }\n  }\n\n\n  async fetchUserFromToken(){\n    const result =  await this.request({endpoint : `author/me`, method : `GET`})\n\n    console.log(\"fetch user?\", result)\n\n    return result\n  }\n\n\n  async addExercise(credentials){\n\n    return await this.request({endpoint : `exercise`, method : `POST`, data : credentials})\n  }\n\n  async getExercise(){\n\n    const results =  await this.request({endpoint : `exercise`, method : `GET`})\n\n    console.log(\"Results from get requrest\", results)\n  }\n\n\n  async loginUser(credentials){\n    return await this.request({endpoint : `author/login`, method : `POST`, data : credentials})\n  }\n\n  async signUpUser(credentials){\n    return await this.request({endpoint : `author/register`, method : `POST`, data : credentials})\n  }\n\n  async logOutUser(){\n    this.setToken(null)\n    localStorage.setItem(this.tokenName, \"\")\n  }\n}\n\nmodule.exports = new APIClient(\n  process.env.REACT_APP_REMOTE_HOST_URL || \"http://localhost:3001\"\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}