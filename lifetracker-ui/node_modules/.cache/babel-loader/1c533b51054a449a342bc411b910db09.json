{"ast":null,"code":"import _toConsumableArray from\"/Users/abdul.karim/lifetrackerProject/lifetracker-ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/abdul.karim/lifetrackerProject/lifetracker-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/abdul.karim/lifetrackerProject/lifetracker-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/abdul.karim/lifetrackerProject/lifetracker-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Navbar from\"../Navbar/Navbar\";import\"./App.css\";import Exercise from\"../Exercise/Exercise\";import{BrowserRouter,Route,Routes}from\"react-router-dom\";import Home from\"../Home/Home\";// import Registration from \"../Registration/SignUp\";\nimport SignInSide from\"../SignInSide/SignInSide\";import SignUp from\"../Registration/SignUp\";import Portal from\"../Portal/Portal\";import useToken from\"../useToken/useToken\";import{useEffect,useState}from\"react\";import APIClient from\"../service/APIClient\";import ExerciseForm from\"../ExerciseForm/ExerciseForm\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$APIClient$fetc,data,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return APIClient.fetchPostFromToken();case 2:_yield$APIClient$fetc=_context.sent;data=_yield$APIClient$fetc.data;error=_yield$APIClient$fetc.error;console.log(\"Returned data fron here\",data.exercisePost);if(data)setPosts(data.exercisePost);if(error)setError(error);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();var token=localStorage.getItem(\"rate_my_token_setup\");if(token){APIClient.setToken(token);fetchPosts();}},[]);var addPost=function addPost(newPost){setPosts(function(oldPosts){return[newPost].concat(_toConsumableArray(oldPosts));});};var handleLogOut=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return APIClient.logOutUser();case 2:setUser({});setError(null);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLogOut(){return _ref2.apply(this,arguments);};}();useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$APIClient$fetc2,data,error;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return APIClient.fetchUserFromToken();case 2:_yield$APIClient$fetc2=_context3.sent;data=_yield$APIClient$fetc2.data;error=_yield$APIClient$fetc2.error;if(data)setUser(data.user);if(error)setError(error);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchUser(){return _ref3.apply(this,arguments);};}();var token=localStorage.getItem(\"rate_my_token_setup\");if(token){APIClient.setToken(token);fetchUser();}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Navbar,{handleLogOut:handleLogOut,user:user,setUser:setUser}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/registration\",element:/*#__PURE__*/_jsx(SignUp,{user:user,setUser:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(SignInSide,{user:user,setUser:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/portal\",element:/*#__PURE__*/_jsx(Portal,{setUser:setUser,user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/exercise\",element:/*#__PURE__*/_jsx(Exercise,{user:user,posts:posts})}),/*#__PURE__*/_jsx(Route,{path:\"/exerciseForm\",element:/*#__PURE__*/_jsx(ExerciseForm,{user:user,addPost:addPost})})]})]})});}","map":{"version":3,"names":["Navbar","Exercise","BrowserRouter","Route","Routes","Home","SignInSide","SignUp","Portal","useToken","useEffect","useState","APIClient","ExerciseForm","axios","App","user","setUser","error","setError","posts","setPosts","fetchPosts","fetchPostFromToken","data","console","log","exercisePost","token","localStorage","getItem","setToken","addPost","newPost","oldPosts","handleLogOut","logOutUser","fetchUser","fetchUserFromToken"],"sources":["/Users/abdul.karim/lifetrackerProject/lifetracker-ui/src/componentss/App/App.jsx"],"sourcesContent":["import Navbar from \"../Navbar/Navbar\";\n\nimport \"./App.css\";\nimport Exercise from \"../Exercise/Exercise\";\n\nimport { BrowserRouter, Route, Routes } from \"react-router-dom\";\nimport Home from \"../Home/Home\";\n// import Registration from \"../Registration/SignUp\";\nimport SignInSide from \"../SignInSide/SignInSide\";\nimport SignUp from \"../Registration/SignUp\";\nimport Portal from \"../Portal/Portal\";\nimport useToken from \"../useToken/useToken\";\n\nimport { useEffect, useState } from \"react\";\nimport APIClient from \"../service/APIClient\";\nimport ExerciseForm from \"../ExerciseForm/ExerciseForm\";\nimport axios from \"axios\";\nexport default function App() {\n\n  const [user, setUser] = useState({})\n  const [error, setError] = useState(null)\n  const [posts, setPosts] = useState([])\n\n  useEffect(()=> {\n    const fetchPosts = async () => {\n\n      // try{\n      //   console.log(\"user right above\", user)\n      //   const url = `http://localhost:3001/exercise/1`\n\n      //   const results = await axios.get(url)\n\n      //   if(results?.data?.exercisePosts){\n      //     setError(null)\n      //     setPosts(results.data.exercisePosts)\n\n      //   }\n        \n  \n      // }\n      // catch(err){\n\n      //   console.log(err)\n      //   const message = err?.response?.data?.error?.message\n      //   setError(message ?? String(err))\n  \n      // }\n      const {data, error} = await APIClient.fetchPostFromToken()\n\n      console.log(\"Returned data fron here\", data.exercisePost)\n\n      if (data) setPosts(data.exercisePost)\n      if (error) setError(error)\n\n    }\n\n    const token = localStorage.getItem(\"rate_my_token_setup\")\n\n    if (token) {\n      APIClient.setToken(token)\n\n      fetchPosts()\n    }\n    \n    \n  }, [])\n\n  const addPost = (newPost) => {\n    setPosts((oldPosts) => [newPost, ...oldPosts])\n  }\n\n\n  const handleLogOut = async () =>{\n\n    await APIClient.logOutUser()\n    setUser({})\n    setError(null)\n\n  }\n\n  useEffect(() => {\n\n\n    const fetchUser = async () => {\n      const {data, error} = await APIClient.fetchUserFromToken()\n      if (data) setUser(data.user)\n      if (error) setError(error)\n    }\n\n    const token = localStorage.getItem(\"rate_my_token_setup\")\n    if (token) {\n\n      APIClient.setToken(token)\n      fetchUser()\n    }\n  }, [])\n\n  \n\n\n  return (\n    <div className=\"app\">\n      \n      <BrowserRouter>\n      <Navbar handleLogOut={handleLogOut} user = {user} setUser = {setUser} />\n        <Routes>\n            <Route path = \"/\" element = {<Home/>} />\n          <Route path=\"/registration\" element ={<SignUp user={user} setUser={setUser}/>} />\n          <Route path = \"/login\" element = { <SignInSide user = {user} setUser={setUser}/>} />\n          <Route path= \"/portal\" element = {<Portal setUser={setUser} user = {user}/>} />\n          <Route path = \"/exercise\" element = {<Exercise user = {user} posts={posts}/>} />\n          <Route path = \"/exerciseForm\" element = {<ExerciseForm user={user} addPost = {addPost} /> } /> \n        </Routes>\n        \n      </BrowserRouter>\n\n      \n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}